<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.18.0/font/bootstrap-icons.css"
      integrity="sha384-rI2DBIG3Fv2jRwe7z9tc3R8pWFM9gGQVoTo5hcc4M2jtEkhl1ykI78zY3hY5FGEW"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
      integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
      crossorigin="anonymous"
    />

    <link rel="stylesheet" href="/css/utils.css" />
    <link rel="stylesheet" href="/css/header.css" />
    <link rel="stylesheet" href="/css/lista_tarefas.css" />
    <link rel="stylesheet" href="/css/card_criarpostagem.css" />
    <link rel="stylesheet" href="/css/post.css" />
    <link rel="stylesheet" href="/css/index.css" />

    <title>Job Delas</title>
  </head>
  <body>
    <header class="header"></header>
    <main>
      <section class="container_principal">
        <div class="lateral_home"></div>

        <div class="container_postagem">
          <div
            class="cardCriarPostagem"
            th:attr="data-nome-usuario=${usuarioLogado != null ? usuarioLogado.nome : ''}"
          ></div>

          <div class="feed">
            <div th:each="postagem : ${postagens}" class="post">
              <div class="user-info">
                <img
                  src="/img/iconfoto.png"
                  alt="User"
                  class="foto_criarpostagem"
                />
                <h4 th:text="${postagem.usuarios.getNome()}">Nome Usuario</h4>
              </div>
              <p
                th:text="${#temporals.format(postagem.data_postagem, 'dd/MM/yyyy HH:mm:ss')}"
                class="post-date"
              ></p>

              <p class="post-content" th:text="${postagem.conteudo}"></p>
              <div class="post-actions">
                <button class="like-button">
                  <i class="fas fa-heart"></i> Curtir
                </button>
                <button class="comment-button">
                  <i class="fas fa-comment"></i> Comentar
                </button>
                <!-- <a
                  th:href="@{/jobdelas/comentarios/{postId}(postId=${postagem.id})}"
                  >Learn</a
                > -->

                <button onclick="exibirComentarios()">
                  <i class="fas fa-eye"></i> Ler Comentários
                </button>
              </div>
              <div id="secaoComentarios" style="display: none">
                <ul>
                  <li th:each="comentario : ${comentarios}">
                    <p
                      th:text="'Usuario: ' + ${comentario.comentario.usuarios.nome}"
                    ></p>
                    <p
                      th:text="'ID do Comentário: ' + ${comentario.comentario.conteudo}"
                    ></p>
                    <p
                      th:text="'Data da Postagem: ' + ${comentario.comentario.data_comentario}"
                    ></p>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>
    <script src="/js/home.js" type="module"></script>

    <script
      src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
      integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
      integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
      integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://kit.fontawesome.com/cda1aa7b4f.js"
      crossorigin="anonymous"
    ></script>

    <script>
      function exibirComentarios() {
        let comentariosSecao = document.getElementById("secaoComentarios");
        if (comentariosSecao.style.display === "none") {
          comentariosSecao.style.display = "block";
        } else {
          comentariosSecao.style.display = "none";
        }
      }
    </script>
  </body>
</html>
